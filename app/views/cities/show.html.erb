<p id="notice"><%= notice %></p>

<div id='banner' style="background-image:url('<%= @city.image_url %>')">
  <div id='gradient'></div>
  <div id='banner_text'>
    <%= @city.name %>, <%= @city.state %>
  </div>
</div>


<div id='spot_info'>
  <h2><%= @city.spots.count %> Spots listed in <%= @city.name %></h2>
  <!-- set the correct number of rows with a loop -->
  <% i = 0 %>
  <% if @city.spots.count % 5 == 0 %>
    <% rows = (@city.spots.count / 5) %>
  <% else %>
    <% rows = ((@city.spots.count / 5) + 1) %>
  <% end %>

  <!-- populate the rows with image links  -->
  <% rows.times do %>
    <div class="spot_row">
      <% @city.spots[i..(i+4)].each do |spot| %>
        <%= link_to city_spot_path(@city, spot), class: "spot_link" do %>
          <div class="spot_img" style="background-image:url('<%= spot.image_url %>')"><p><%= spot.name %></p></div>
        <% end %>
      <% end %>
    </div>
  <% end %>

</div>

<div id='reveal_form'>
  Know a Spot?
</div>

<div id="new_spot_form">
  <% if user_signed_in? %>
    <h3>
      Submit a new Spot in <%= @city.name %>:
    </h3>

    <%= form_for [@city, Spot.new] do |f| %>
      <div class="field">
        <%= f.label :name %>
        <%= f.text_field :name, placeholder: "What's the Spot's name?" %>
      </div>

      <div class="field">
        <%= f.label :image_url %>
        <%= f.text_field :image_url, placeholder: "Enter image link URL" %>
      </div>

      <div class="field">
        <%= f.label :description %>
        <%= f.text_area :description, placeholder: "Tell us about this Spot" %>
      </div>

      <div>
        <%= f.submit %>
      </div>
    <% end %>

  <% end %>

</div>

<%= link_to 'Edit', edit_city_path(@city) %> |
<%= link_to 'Back', cities_path %>
